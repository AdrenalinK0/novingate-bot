from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters
from config import TOKEN, ADMIN_ID
from utils.keyboard_utils import user_main_menu_keyboard, admin_main_menu_keyboard

async def start(update: Update, context):
    user_id = update.message.from_user.id
    if user_id == ADMIN_ID:
        await update.message.reply_text(
            'Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',
            reply_markup=admin_main_menu_keyboard()
        )
    else:
        await update.message.reply_text(
            'Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª novingate Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',
            reply_markup=user_main_menu_keyboard()
        )

async def handle_message(update: Update, context):
    text = update.message.text
    if text == 'ğŸ’° Ø´Ø§Ø±Ú˜ Ú©ÛŒÙ Ù¾ÙˆÙ„':
        await update.message.reply_text('Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:')
    elif text == 'ğŸ†• Ø³Ø§Ø®Øª Ø§Ú©Ø§Ù†Øª Ø¬Ø¯ÛŒØ¯':
        await update.message.reply_text('Ù„Ø·ÙØ§Ù‹ Ù¾Ù„Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:')
    elif text == 'ğŸ“‹ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ú©Ø§Ù†Øªâ€ŒÙ‡Ø§':
        await update.message.reply_text('Ù„ÛŒØ³Øª Ø§Ú©Ø§Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§:')
    elif text == 'ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª':
        await update.message.reply_text('Ù„Ø·ÙØ§Ù‹ Ù…Ø´Ú©Ù„ ÛŒØ§ Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:')
    elif text == 'ğŸ“¬ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§':
        await update.message.reply_text('Ù„ÛŒØ³Øª ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§:')
    elif text == 'ğŸ’³ Ú©ÛŒÙ Ù¾ÙˆÙ„':
        await update.message.reply_text('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø´Ù…Ø§:')
    elif text == 'ğŸ‘¥ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÚ¯ÛŒØ±ÛŒ':
        await update.message.reply_text('Ù„ÛŒÙ†Ú© Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø´Ù…Ø§:')
    elif text == 'ğŸ“š Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§':
        await update.message.reply_text('Ù„ÛŒØ³Øª Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§:')
    else:
        await update.message.reply_text('Ø¯Ø³ØªÙˆØ± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª.')

def main():
    application = Application.builder().token(TOKEN).build()

    # Ø«Ø¨Øª Ø¯Ø³ØªÙˆØ±Ø§Øª
    application.add_handler(CommandHandler("start", start))

    # Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†ÛŒ
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    # Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª
    application.run_polling()

if __name__ == '__main__':
    main()